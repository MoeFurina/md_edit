<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdownç¼–è¾‘å™¨</title>
    <link rel="stylesheet" href="/static/css/editor.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* æ·±è‰²æ¨¡å¼CSS */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #333333;
            --text-secondary: #666666;
            --border-color: #dee2e6;
            --toolbar-bg: #ffffff;
            --button-hover: #f0f0f0;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #3a3a3a;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --border-color: #4a4a4a;
            --toolbar-bg: #2d2d2d;
            --button-hover: #3a3a3a;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="editor-container">
        <!-- å¯æŠ˜å ä¾§è¾¹æ  -->
        <div id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>å·¥å…·é¢æ¿</h3>
                <button id="sidebarClose" title="å…³é—­">âœ•</button>
            </div>
            <div class="sidebar-content">
                <!-- åšå®¢æ¡†æ¶é€‰æ‹© -->
                <div class="sidebar-section">
                    <h4>åšå®¢æ¡†æ¶</h4>
                    <div class="form-group">
                        <select id="blogFramework" class="blog-framework-select">
                            <option value="">è¯·é€‰æ‹©æ¡†æ¶</option>
                            <option value="astro">Astro</option>
                        </select>
                    </div>
                </div>

                <!-- å…ƒæ•°æ®ç¼–è¾‘è¡¨å• (é»˜è®¤éšè—) -->
                <div id="metadataForm" class="metadata-form" style="display: none;">
                    <h4>å…ƒæ•°æ®è®¾ç½®</h4>
                    <div class="form-group">
                        <label for="metaTitle">æ ‡é¢˜:</label>
                        <input type="text" id="metaTitle" placeholder="è¾“å…¥æ–‡ç« æ ‡é¢˜">
                    </div>
                    <div class="form-group">
                        <label for="metaPublished">å‘å¸ƒæ—¥æœŸ:</label>
                        <input type="date" id="metaPublished">
                    </div>
                    <div class="form-group">
                        <label for="metaDescription">ç®€ä»‹:</label>
                        <input type="text" id="metaDescription" placeholder="è¾“å…¥æ–‡ç« ç®€ä»‹">
                    </div>
                    <div class="form-group">
                        <label for="metaImage">å°é¢å›¾ç‰‡:</label>
                        <input type="text" id="metaImage" placeholder="ç‚¹å‡»é€‰æ‹©å°é¢å›¾ç‰‡" readonly>
                    </div>

                    <!-- å›¾ç‰‡é€‰æ‹©åŒºåŸŸ (é»˜è®¤éšè—) -->
                    <div id="imageSelectionArea" class="image-selection-area" style="display: none;">
                        <h5>é€‰æ‹©å›¾ç‰‡</h5>
                        <div id="userImagesList" class="user-images-list">
                            <!-- ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label>æ ‡ç­¾:</label>
                        <div id="tagsContainer" class="tags-container">
                            <!-- æ ‡ç­¾è¾“å…¥æ¡†å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
                        </div>
                        <button type="button" id="addTagBtn" class="add-tag-btn">+ æ·»åŠ æ ‡ç­¾</button>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h4>å›¾ç‰‡è®¾ç½®</h4>
                    <div class="form-group">
                        <label for="sidebarImagePath">å›¾ç‰‡è·¯å¾„:</label>
                        <input type="text" id="sidebarImagePath" value="/image" placeholder="å¦‚ /image/123/222/">
                    </div>
                </div>
                <div class="sidebar-section">
                    <h4>ç¼–è¾‘ç»Ÿè®¡</h4>
                    <div class="stats">
                        <div class="stat-item">
                            <span class="stat-label">å­—ç¬¦æ•°:</span>
                            <span id="charCount" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">è¯æ•°:</span>
                            <span id="wordCount" class="stat-value">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸»è¦å†…å®¹åŒº -->
        <div class="main-content">
            <!-- å·¥å…·æ  -->
            <div class="toolbar">
            <div class="toolbar-group">
                <select id="headingSelect" title="æ ‡é¢˜">
                    <option value="">æ ‡é¢˜</option>
                    <option value="h1">H1</option>
                    <option value="h2">H2</option>
                    <option value="h3">H3</option>
                    <option value="h4">H4</option>
                    <option value="h5">H5</option>
                    <option value="h6">H6</option>
                </select>

                <select id="fontSizeSelect" title="å­—ä½“å¤§å°">
                    <option value="12px">12px</option>
                    <option value="14px">14px</option>
                    <option value="16px" selected>16px</option>
                    <option value="18px">18px</option>
                    <option value="20px">20px</option>
                    <option value="24px">24px</option>
                    <option value="28px">28px</option>
                    <option value="32px">32px</option>
                </select>

                <input type="color" id="textColor" title="æ–‡å­—é¢œè‰²" value="#000000">
            </div>

            <div class="toolbar-group">
                <button id="boldBtn" title="åŠ ç²—">B</button>
                <button id="italicBtn" title="å€¾æ–œ">I</button>
                <button id="underlineBtn" title="ä¸‹åˆ’çº¿">U</button>
                <button id="strikethroughBtn" title="åˆ é™¤çº¿">S</button>
            </div>

            <div class="toolbar-group">
                <button id="alignLeftBtn" title="å·¦å¯¹é½">â¬…</button>
                <button id="alignCenterBtn" title="å±…ä¸­">â¬Œ</button>
                <button id="alignRightBtn" title="å³å¯¹é½">â¡</button>
            </div>

            <div class="toolbar-group">
                <button id="orderedListBtn" title="æœ‰åºåˆ—è¡¨">1.</button>
                <button id="unorderedListBtn" title="æ— åºåˆ—è¡¨">â€¢</button>
                <button id="quoteBtn" title="å¼•ç”¨">"</button>
                <button id="hrBtn" title="æ°´å¹³çº¿">â”€</button>
            </div>

            <div class="toolbar-group">
                <select id="codeSelect" title="ä»£ç å—">
                    <option value="">ä»£ç </option>
                    <option value="c">C</option>
                    <option value="cpp">C++</option>
                    <option value="python">Python</option>
                    <option value="bash">Bash</option>
                </select>

                <button id="inlineCodeBtn" title="è¡Œå†…ä»£ç ">`</button>
            </div>

            <div class="toolbar-group">
                <button id="indentBtn" title="ç¼©è¿›">Tab</button>
                <button id="imageBtn" title="ç²˜è´´å›¾ç‰‡">ğŸ“·</button>
            </div>

            <div class="toolbar-group">
                <button id="linkBtn" title="æ’å…¥é“¾æ¥">ğŸ”—</button>
                <button id="themeToggle" title="åˆ‡æ¢æ·±è‰²æ¨¡å¼">ğŸŒ“</button>
                <button id="sidebarToggle" title="æŠ˜å ä¾§è¾¹æ ">â˜°</button>
                <button id="exportBtn" title="å¯¼å‡ºMarkdown">ğŸ“¥</button>
                <button id="logoutBtn" title="é€€å‡ºç™»å½•">ğŸšª</button>
            </div>
        </div>

        <!-- ç¼–è¾‘åŒºåŸŸ -->
            <div class="editor-content">
                <div id="editor" contenteditable="true" placeholder="å¼€å§‹è¾“å…¥æ‚¨çš„Markdownå†…å®¹..."></div>
            </div>

            <!-- çŠ¶æ€æ  -->
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-label">å½“å‰æ ¼å¼:</span>
                    <span id="currentFormat" class="status-value">æ— </span>
                </div>
                <div class="status-item">
                    <span class="status-label">å…‰æ ‡ä½ç½®:</span>
                    <span id="cursorPosition" class="status-value">0, 0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">é€‰æ‹©:</span>
                    <span id="selectedText" class="status-value">æœªé€‰æ‹©</span>
                </div>
            </div>
        </div>
    </div>

    <!-- è¶…é“¾æ¥å¯¹è¯æ¡† -->
    <div id="linkDialog" class="dialog">
        <div class="dialog-content">
            <h3>æ’å…¥é“¾æ¥</h3>
            <div class="form-group">
                <label for="linkUrl">é“¾æ¥åœ°å€:</label>
                <input type="url" id="linkUrl" placeholder="https://example.com">
            </div>
            <div class="form-group">
                <label for="linkTitle">æ˜¾ç¤ºæ ‡é¢˜:</label>
                <input type="text" id="linkTitle" placeholder="é“¾æ¥æ˜¾ç¤ºæ–‡å­—">
            </div>
            <div class="form-group">
                <button id="fetchTitle" type="button">ğŸ“¥ è·å–æ ‡é¢˜</button>
                <small>ç‚¹å‡»è·å–ç½‘é¡µæ ‡é¢˜æŒ‰é’®è‡ªåŠ¨ä»URLè·å–æ ‡é¢˜</small>
            </div>
            <div class="dialog-buttons">
                <button id="cancelLink">å–æ¶ˆ</button>
                <button id="confirmLink">æ’å…¥</button>
            </div>
        </div>
    </div>

    <!-- å¯¼å‡ºå¯¹è¯æ¡† -->
    <div id="exportDialog" class="dialog">
        <div class="dialog-content">
            <h3>å¯¼å‡ºè®¾ç½®</h3>
            <div class="form-group">
                <label for="imagePath">å›¾ç‰‡è·¯å¾„:</label>
                <input type="text" id="imagePath" value="/image" placeholder="è¾“å…¥å›¾ç‰‡è·¯å¾„ï¼Œå¦‚ /image/123/222/">
            </div>
            <div class="form-group">
                <small>æ ¼å¼è¯´æ˜ï¼šä»¥ / å¼€å¤´ï¼Œå¯ä»¥åŒ…å«å¤šçº§ç›®å½•ï¼Œå¦‚ /image/123/222/</small>
            </div>
            <div class="dialog-buttons">
                <button id="cancelExport">å–æ¶ˆ</button>
                <button id="confirmExport">å¯¼å‡º</button>
            </div>
        </div>
    </div>

    <!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->
    <input type="file" id="fileInput" accept="image/*" style="display: none;">

    <script src="/static/js/editor.js?v={{ timestamp }}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <!-- è®¿é—®ç»Ÿè®¡ä»£ç ï¼Œåœ¨çº¿é“¾æ¥æœ‰ï¼Œè¿™é‡Œæ³¨é‡Šäº† -->
    <!-- <script defer src="https://umami.vmss.cn/script.js" data-website-id="d919ca39-3dba-4479-98bf-699ef41b1355"></script> -->
</body>
</html>